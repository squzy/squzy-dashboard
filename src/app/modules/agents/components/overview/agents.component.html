<ng-container *ngIf="currentId$ | async as id">
  <nav mat-tab-nav-bar class="type-menu">
    <a
      mat-tab-link
      *ngFor="let type of types$ | async"
      [routerLink]="['/agents', id, type]"
      [routerLinkActive]="['/agents', id, type]"
      #typeLink="routerLinkActive"
      [active]="typeLink.isActive"
    >
      <mat-icon>{{ iconByType[type] }}</mat-icon>
    </a>
  </nav>
</ng-container>

<div class="layout">
  <nav mat-tab-nav-bar class="agent-menu">
    <a
      mat-tab-link
      *ngFor="let agent of agents$ | async"
      [routerLink]="['/agents', agent ]"
      routerLinkActive
      #agentLink="routerLinkActive"
      [active]="agentLink.isActive"
    >{{ agent }}</a>
  </nav>

  <mat-card class="content">
    <ng-container *ngIf="currentId$ | async as id; else selectAgent">
      <div class="checkers-layout" [ngSwitch]="currentType$ | async">
        <sqd-live-stat [agentId]="id" *ngSwitchCase="LIVE_TYPE"></sqd-live-stat>
        <sqd-cpu-stats [agentId]="id" *ngSwitchCase="CPU_TYPE"></sqd-cpu-stats>
        <sqd-memory-stat [agentId]="id" *ngSwitchCase="MEMORY_TYPE"></sqd-memory-stat>
        <sqd-disks-stat [agentId]="id" *ngSwitchCase="DISK_TYPE"></sqd-disks-stat>
        <sqd-net-stat [agentId]="id" *ngSwitchCase="NET_TYPE"></sqd-net-stat>
      </div>
    </ng-container>
    <ng-template #selectAgent>Please click on some agent in left menu</ng-template>
  </mat-card>
</div>
