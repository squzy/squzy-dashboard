<ng-container [queryParamGroup]="queryFilterGroup">
  <table mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="Id">
      <th mat-header-cell *matHeaderCellDef>Id</th>
      <td mat-cell *matCellDef="let element">{{ element.id }}</td>
    </ng-container>

    <ng-container matColumnDef="StartTime">
      <th mat-header-cell *matHeaderCellDef mat-sort-header [arrowPosition]="'before'">
        <mat-form-field>
          <mat-label>From</mat-label>
          <input
            matInput
            [owlDateTimeTrigger]="dateFromComponent"
            [owlDateTime]="dateFromComponent"
            queryParamName="dateFrom"
            autocomplete="off"
          >
          <owl-date-time [pickerMode]="'dialog'" [showSecondsTimer]="true" #dateFromComponent></owl-date-time>
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ toDate(element.start_time) | date: 'medium' }}</td>
    </ng-container>

    <ng-container matColumnDef="EndTime">
      <th mat-header-cell *matHeaderCellDef mat-sort-header [arrowPosition]="'before'">
        <mat-form-field>
          <mat-label>To:</mat-label>
          <input
            matInput
            [owlDateTimeTrigger]="dateToComponent"
            [owlDateTime]="dateToComponent"
            queryParamName="dateTo"
            autocomplete="off"
          >
          <owl-date-time [pickerMode]="'dialog'" [showSecondsTimer]="true" #dateToComponent></owl-date-time>
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ toDate(element.end_time) | date: 'medium' }}</td>
    </ng-container>

    <ng-container matColumnDef="Name">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput queryParamName="name" type="text">
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ element.name }}</td>
    </ng-container>

    <ng-container matColumnDef="Type">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-label>Type</mat-label>
          <mat-select (selectionChange)="onTypeChange($event)" [value]="type.value">
            <mat-option *ngFor="let type of types" [value]="type">{{ toType(type) }}</mat-option>
          </mat-select>
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ toType(element.type) }}</td>
    </ng-container>

    <ng-container matColumnDef="Status">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-label>Status</mat-label>
          <mat-select (selectionChange)="onStatusChange($event)" [value]="type.value">
            <mat-option *ngFor="let type of statuses" [value]="type">{{ toStatus(type) }}</mat-option>
          </mat-select>
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ toStatus(element.status) }}</td>
    </ng-container>

    <ng-container matColumnDef="Duration">
      <th mat-header-cell *matHeaderCellDef mat-sort-header [arrowPosition]="'before'">Duration</th>
      <td mat-cell *matCellDef="let element">{{ getDuration(element.end_time, element.start_time) }}</td>
    </ng-container>

    <ng-container matColumnDef="Host">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-label>Host</mat-label>
          <input matInput queryParamName="host" type="text">
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ element.meta?.host }}</td>
    </ng-container>

    <ng-container matColumnDef="Path">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-label>Path</mat-label>
          <input matInput queryParamName="path" type="text">
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ element.meta?.path }}</td>
    </ng-container>

    <ng-container matColumnDef="Method">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-label>Method</mat-label>
          <input matInput queryParamName="method" type="text">
        </mat-form-field>
      </th>
      <td mat-cell *matCellDef="let element">{{ element.meta?.method }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="pageSizes" showFirstLastButtons></mat-paginator>
</ng-container>
